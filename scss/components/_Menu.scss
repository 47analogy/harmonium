$menu-bkgd: $white !default;
$menu-color: null !default;
$menu-link-bkgd: null !default;
$menu-link-bkgd-hover: null !default;
$menu-link-bkgd-click: null !default;
$menu-link-bkgd-active: null !default;
$menu-link-color: null !default;
$menu-link-color-hover: null !default;
$menu-link-color-click: null !default;
$menu-link-color-active: null !default;

$menu-bkgd-inverse: $brand-dark !default;
$menu-color-inverse: null !default;
$menu-link-bkgd-inverse: null !default;
$menu-link-bkgd-inverse-hover: null !default;
$menu-link-bkgd-inverse-click: null !default;
$menu-link-bkgd-inverse-active: null !default;
$menu-link-color-inverse: null !default;
$menu-link-color-inverse-hover: null !default;
$menu-link-color-inverse-click: null !default;
$menu-link-color-inverse-active: null !default;

$menu-dropdown-width: 24rem !default;

@mixin vertical-menu {
  display: block;
  &.rev-Menu--dividers {
    .rev-Menu--nested {
      border-top: 1px solid $divider-color;
    }
    .rev-Menu-item,
    .rev-Menu-item--divider {
      border-bottom: 1px solid $divider-color;
    }
    .rev-Menu-item:last-of-type {
      border: 0;
    }
  }
  .rev-Menu-item--divider {
    border-bottom: 1px solid $divider-color;
  }
  .rev-Menu-item--text .rev-Menu-item--divider {
    margin-bottom: $global-vertical-space / 2;
  }
}
@mixin horizontal-menu {
  @include flex(center, row, space-between, wrap);
  &.rev-Menu--dividers .rev-Menu-item,
  .rev-Menu-item--divider {
    border-left: 1px solid $divider-color;
  }
  &.rev-Menu--dividers .rev-Menu-item:first-of-type {
    border: 0;
  }
  .rev-Menu--nested {
    border: 1px solid $divider-color;
    border-top: 0;
    border-radius: $global-radius;
    display: none;
    position: absolute;
    width: $menu-dropdown-width;
    z-index: $above;
    .rev-Menu--nested {
      border: 0;
      position: static;
      width: 100%;
    }
    li:hover & {
      display: block;
    }
  }
  .rev-Menu-item {
    position: relative;
    &:hover,
    &:active,
    &:focus,
    &.rev-Menu-item--active {
      .rev-Menu--nested {
        display: block;
      }
    }
  }
}

.rev-Menu {
  background: $menu-bkgd;
  color: $menu-color;
  position: relative;
  &.rev-Menu--horizontal {
    @include horizontal-menu;
  }
  &.rev-Menu--horizontalJustified {
    @include horizontal-menu;
    .rev-Menu-item {
      flex: 1;
      text-align: center;
    }
  }
  &.rev-Menu--horizontalCentered {
    @include horizontal-menu;
    justify-content: center;
  }
  &.rev-Menu--horizontalLeft {
    @include horizontal-menu;
    justify-content: flex-start;
  }
  &.rev-Menu--horizontalRight {
    @include horizontal-menu;
    justify-content: flex-end;
  }
  &.rev-Menu--vertical,
  &.rev-Menu--verticalLeft {
    @include vertical-menu;
    text-align: left;
  }
  &.rev-Menu--verticalCentered {
    @include vertical-menu;
    text-align: center;
  }
  &.rev-Menu--verticalRight {
    @include vertical-menu;
    text-align: right;
  }
  &.rev-Menu--inverse {
    @include body-color-stack-inverted;
    background: $menu-bkgd-inverse;
    color: $menu-color-inverse;
    .rev-Menu {
      background: $menu-bkgd-inverse;
    }
    &.rev-Menu--dividers {
      .rev-Menu--nested {
        border-color: $divider-color-light;
      }
    }
    &.rev-Menu--dividers .rev-Menu-item,
    .rev-Menu-item--divider {
      border-color: $divider-color-light;
    }
  }
}
.rev-Menu-item {
  @include navigation-color-management;
  margin: 0;
  padding: 0;
  position: relative;
  .rev-Menu--inverse & {
    @include navigation-color-management-inverted;
  }
  &.rev-Menu-item--text,
  a {
    display: block;
    padding: $global-vertical-space / 2 $global-horizontal-space $global-vertical-space / 2 $global-horizontal-space;
  }
  a {
    background: $menu-link-bkgd;
    color: $menu-link-color;
    &:hover {
      background: $menu-link-bkgd-hover;
      color: $menu-link-color-hover;
    }
    &:active {
      background: $menu-link-bkgd-click;
      color: $menu-link-color-click;
    }
    &:focus {
      background: $menu-link-bkgd-active;
      color: $menu-link-color-active;
    }
  }
  &[class*='--active'] a {
    background: $menu-link-bkgd-active;
    color: $menu-link-color-active;
  }
  .rev-Menu--inverse  & {
    .rev-Menu-item {
      a {
        background: $menu-link-bkgd-inverse;
        color: $menu-link-color-inverse;
        &:hover {
          background: $menu-link-bkgd-inverse-hover;
          color: $menu-link-color-inverse-hover;
        }
        &:active {
          background: $menu-link-bkgd-inverse-click;
          color: $menu-link-color-inverse-click;
        }
        &:focus {
          background: $menu-link-bkgd-inverse-active;
          color: $menu-link-color-inverse-active;
        }
      }
      &[class*='--active'] a {
        background: $menu-link-bkgd-inverse-active;
        color: $menu-link-color-inverse-active;
      }
    }
  }
}
/*TODO: do this smarter*/
.rev-Menu--nested {
  a {
    padding-left: $global-padding;
  }
  .rev-Menu--nested {
    a {
      padding-left: $global-padding-large;
    }
    .rev-Menu--nested {
      a {
        padding-left: $global-padding-larger;
      }
    }
  }
}
