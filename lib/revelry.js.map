{"version":3,"sources":["../src/revelry.js"],"names":[],"mappings":"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","file":"revelry.js","sourcesContent":["import _ from 'underscore'\nimport UnderscoreString from 'underscore.string'\nimport React from 'react'\nimport {renderToString} from 'react-dom/server'\nimport CoreMixin from './mixins/core'\nimport mixSpecIntoComponent from './mixSpecIntoComponent'\n\n_.str = UnderscoreString\n\nconst ESCAPE_LOOKUP = {\n  '&': '&amp;',\n  '>': '&gt;',\n  '<': '&lt;',\n  '\"': '&quot;',\n  '\\'': '&#x27;',\n}\nconst ESCAPE_REGEX = /[&><'']/g\n\nconst App = {\n  Mixins: {},\n  Components: {},\n  Examples: {},\n}\n\nclass Revelry {\n\n  static Mixins = {\n    Core: CoreMixin,\n  }\n  static Components = {}\n  static Examples = {}\n  static App = App\n\n  static pathToObject(container) {\n    return function(path) {\n      const parts = path.split('/')\n\n      let object = container\n\n      for(let i = 0; i < parts.length; i++) {\n        const key = parts[i]\n\n        object = object[key]\n        if(object === null || typeof object === 'undefined') {\n          break\n        }\n      }\n\n      return object\n    }\n  }\n\n  static isServerContext() {\n    return typeof window === 'undefined'\n  }\n\n  static isClientContext() {\n    return !Revelry.isServerContext()\n  }\n\n  static appObject(name, object) {\n    return Revelry.registerObject(`App.${name}`, object)\n  }\n\n  static registerObject(name, object) {\n    const parts = name.split('.')\n    let container = Revelry\n\n    _(parts).each((part, i) => {\n\n      if(i === parts.length - 1) {\n        if(container[part] !== null && typeof container[part] !== 'undefined' && name !== 'App.Components.Main') {\n          console.warn(`Object previously defined: ${name}`)\n        }\n        container[part] = object\n      } else {\n        container[part] = container[part] || {}\n        container = container[part]\n      }\n    })\n\n    return object\n  }\n\n  static appComponent(name, object) {\n    name = `App.Components.${name}`\n    return Revelry.registerObject(name, Revelry.createReactClass(name, object))\n  }\n\n  static registerComponent(name, object) {\n    name = `Components.${name}`\n    return Revelry.registerObject(name, Revelry.createReactClass(`Revelry.${name}`, object))\n  }\n\n  static createReactClass(displayName, object) {\n    object.displayName = displayName\n\n    // Initialize mixins to an empty array if it doesn't exist yet\n    if(!object.mixins) {\n      object.mixins = []\n    } else if(!(object.mixins instanceof Array)) {\n      throw new Error(`${displayName}'s mixins property must be an array.`)\n    }\n\n    // Check for inclusion of missing mixins\n    object.mixins.forEach((mixin, index) => {\n      if(mixin === null || typeof mixin === 'undefined') {\n        console.warn(`${displayName} attempted to include a missing mixin at index ${index}.`)\n      }\n    })\n\n    // Add Revelry Core mixin\n    object.mixins.unshift(Revelry.Mixins.Core)\n\n    if(typeof object === 'function') {\n      object.mixins.forEach((mixin) => mixSpecIntoComponent(object, mixin))\n    }\n\n    if(typeof object === 'function') { // ES6 or Coffeescript class, OK as-is\n      return object\n    }\n    // Old style react class - pass to createClass\n    return React.createClass(object)\n  }\n\n  static appMixin(name, object) {\n    if(object === null || typeof object === 'undefined') {\n      throw new Error(`Missing mixin \\`${name}\\``)\n    }\n    return Revelry.registerObject(`App.Mixins.${name}`, object)\n  }\n\n  static registerMixin(name, object) {\n    if(object === null || typeof object === 'undefined') {\n      throw new Error(`Missing mixin \\`${name}\\``)\n    }\n    return Revelry.registerObject(`Mixins.${name}`, object)\n  }\n\n  static registerExample(name, object) {\n    name = `Examples.${name}`\n    return Revelry.registerObject(name, Revelry.createReactClass(`Revelry.${name}`, object))\n  }\n\n  static appExample(name, object) {\n    name = `App.Examples.${name}`\n    return Revelry.registerObject(name, Revelry.createReactClass(name, object))\n  }\n\n  static registerModel(name, object) {\n    return Revelry.registerObject(`Models.${name}`, object)\n  }\n\n  static appModel(name, object) {\n    return Revelry.registerObject(`App.Models.${name}`, object)\n  }\n\n  static pullInto(context) {\n    console.warn('`Revelry.pullInto` is deprecated.')\n    return (...names) => {\n      names.forEach((name) => context[name] = Revelry.Components[name])\n    }\n  }\n\n  static _escaper(match) {\n    return ESCAPE_LOOKUP[match]\n  }\n\n  static escapeTextForBrowser(text) {\n    return (`${text}`).replace(ESCAPE_REGEX, Revelry._escaper)\n  }\n\n  static _resetUniqueId() {\n    let idCounter = 0\n\n    _.uniqueId = function(prefix) {\n      const id = `${++idCounter}`\n\n      return prefix ? prefix + id : id\n    }\n  }\n\n  static hasView(path) {\n    console.log('hasView', path, Revelry.App.Components)\n    return Revelry.Components.Main.hasView(path)\n  }\n\n  static viewToString(path, options) {\n    console.log('viewToString', path, Revelry.App.Components)\n    Revelry._resetUniqueId()\n\n    const {Main} = Revelry.Components\n\n    const props = {\n      path,\n      options,\n    }\n\n    const json = Revelry.escapeTextForBrowser(JSON.stringify(props))\n\n    const tag = (inner) => `<div data-react-class='App.Components.Main' data-react-props='${json}'>${inner}</div>`\n\n    const component = React.createElement(Main, props)\n\n    // 2 checks: One is for standard Rails apps and one for jsonapi-resources.\n    if(props.options.disable_prerender || (props.options.meta && props.options.meta['disable-prerender'])) {\n      return tag\n    }\n\n    try {\n      return tag(renderToString(component))\n    } catch(e) {\n      return `<pre><code>${path}</code></pre>` +\n             `<pre><code>${Revelry.escapeTextForBrowser(e.stack)}</code></pre>` +\n             tag('') +\n             `<pre><code>${json}</code></pre>`\n    }\n  }\n\n  static initExecjsRails() {\n    global.execjs_rails_has_view = Revelry.hasView.bind(Revelry)\n    global.execjs_rails_handler = Revelry.viewToString.bind(Revelry)\n  }\n}\n\nif(Revelry.isClientContext()) {\n  window.global = window\n}\n\n\n\n\nRevelry.registerComponent('Main', class Main extends React.Component {\n\n  /* CLASS METHODS */\n\n  static pathToComponentClass(path) {\n    const parts = path.split('/')\n\n    let klass = Revelry.App.Components\n    // console.log(Revelry.App.Components)\n\n    for(let i = 0; i < parts.length; i++) {\n      const key = parts[i]\n\n      klass = klass[key]\n      if(klass === null || typeof klass === 'undefined') {\n        break\n      }\n    }\n\n    return klass\n  }\n\n  static hasView(path) {\n    const klass = Main.pathToComponentClass(path)\n    const found = klass !== null && typeof klass !== 'undefined'\n\n    return found\n  }\n\n  static createElement(klass, props, children) {\n    if(React.createElement !== null && typeof React.createElement !== 'undefined') {\n      return React.createElement(klass, props, children)\n    }\n    return (\n      <klass {...props}>\n        {children}\n      </klass>\n    )\n  }\n\n  static get propTypes() {\n    return {\n      path: React.PropTypes.string.isRequired,\n      options: React.PropTypes.object,\n    }\n  }\n\n  /* INSTANCE METHODS */\n\n  getChildComponentClassName() {\n    return this.constructor.pathToComponentClassName(this.props.path)\n  }\n\n  getChildComponentClass() {\n    return this.constructor.pathToComponentClass(this.props.path)\n  }\n\n  // Some things are just easier when semi-global.\n  // (Think CSRF token.)\n  componentWillMount() {\n    Revelry.App.props = this.props.options\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    Revelry.App.props = this.nextProps.options\n  }\n\n  render() {\n    const klass = this.getChildComponentClass()\n\n    if(klass === null || typeof klass === 'undefined') {\n      return <div>{`Couldn't locate component \\`${this.getChildComponentClassName()}\\``}</div>\n    }\n    return this.constructor.createElement(klass, this.props.options)\n  }\n})\n\n\n// Application code can overwrite this to do whatever extra stuff you want.\nRevelry.appComponent('Main', class Main extends React.Component {\n  render() {\n    console.warn('Revelry application does not define a `Main` component. Falling back to default implementation.')\n    return <Revelry.Components.Main {...this.props} />\n  }\n})\n\n\nexport default Revelry\n"]}